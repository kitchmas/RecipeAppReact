{"code":"webpackHotUpdate(0,{61:function(t,e,i){\"use strict\";var n=function(){function t(t,e){for(var i,n=0;n<e.length;n++)(i=e[n]).enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=l(i(1)),r=l(i(59)),o=i(15),a=i(37),p=i(36),c=i(32),u=i(27),h=i(26),d=i(21),g=i(20);l(i(11));function l(t){return t&&t.__esModule?t:{default:t}}function f(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var L=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.state={isLoading:!0,authUser:null,currentView:1,views:{gridLayout:1,listLayout:2,createRecipe:3,editRecipe:4,viewRecipe:5},selectedRecipe:{},recipes:[],newRecipe:{name:\"\",description:\"\",newIngredientName:\"\",method:\"\",ingredients:[]},creatingShoppingList:!1,shoppingList:null},i.onSubmit=i.onSubmit.bind(i),i.createRecipe=i.createRecipe.bind(i),i.recipeClicked=i.recipeClicked.bind(i),i.editRecipe=i.editRecipe.bind(i),i.gridLayout=i.gridLayout.bind(i),i.listLayout=i.listLayout.bind(i),i.createShoppingListClicked=i.createShoppingListClicked.bind(i),i.addShoppingListExtras=i.addShoppingListExtras.bind(i),i.logOutClicked=i.logOutClicked.bind(i),i.saveShoppingList=i.saveShoppingList.bind(i),i.newShoppingList=i.newShoppingList.bind(i),i.deleteShoppingListIngredient=i.deleteShoppingListIngredient.bind(i),i.deleteShoppingListExtra=i.deleteShoppingListExtra.bind(i),i.crossOutShoppingListIngredient=i.crossOutShoppingListIngredient.bind(i),i.crossOutShoppingListExtra=i.crossOutShoppingListExtra.bind(i),i}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.Component),n(e,[{key:\"showLoading\",value:function(){this.setState({isLoading:!0})}},{key:\"hideLoading\",value:function(){this.setState({isLoading:!1})}},{key:\"getRecipes\",value:function(){var t=this;this.showLoading(),o.firestore.collection(\"Recipes\").get().then(function(e){var i=e.docs.map(function(t){var e=t.data();return e.id=t.id,e});t.setState(function(t){return{recipes:i,currentView:t.views.gridLayout}}),t.hideLoading()})}},{key:\"getShoppingList\",value:function(t){var e=this;this.showLoading(),o.firestore.collection(\"ShoppingList\").where(\"shoppingListUsed\",\"==\",!1).get().then(function(i){if(1===i.docs.length){var n=i.docs[0].data();e.setState({shoppingList:n}),t&&t(),e.hideLoading()}else e.createNewShoppingList()})}},{key:\"createNewShoppingList\",value:function(){var t=this,e=new Date,i={id:a.IdCreator.createAutoId(),dateCreated:e,shoppingListUsed:!1,shoppingListIngredients:[],shoppingListExtras:[]};this.showLoading(),o.firestore.collection(\"ShoppingList\").doc(i.id).set(i).then(function(){console.log(\"ShoppingListSaved saved successfully\"),t.setState({shoppingList:i}),t.hideLoading()}).catch(function(t){return console.log(\"Error adding document: \",t)})}},{key:\"saveShoppingList\",value:function(){var t=this.state.shoppingList;t.id&&o.firestore.collection(\"ShoppingList\").doc(t.id).set(t).then(function(){}).catch(function(t){return console.log(\"Error adding document: \",t)})}},{key:\"newShoppingList\",value:function(){if(confirm(\"Are you sure you would like to start a new shopping list?\")){var t=this.state.shoppingList;t.shoppingListUsed=!0,this.setState({shoppingList:t}),this.saveShoppingList()}}},{key:\"deleteShoppingListIngredient\",value:function(t){var e=Object.assign({},this.state.shoppingList);-1<t&&e.shoppingListIngredients.splice(t,1),this.setState({shoppingList:e})}},{key:\"crossOutShoppingListIngredient\",value:function(t){var e=this,i=Object.assign({},this.state.shoppingList);-1<t&&(i.shoppingListIngredients[parseInt(t)].crossedOut=!i.shoppingListIngredients[parseInt(t)].crossedOut),this.setState({shoppingList:i},function(){e.saveShoppingList()})}},{key:\"deleteShoppingListExtra\",value:function(t){var e=this,i=Object.assign({},this.state.shoppingList);-1<t&&i.shoppingListExtras.splice(t,1),this.setState({shoppingList:i}),this.setState({shoppingList:i},function(){e.playAnimation()})}},{key:\"crossOutShoppingListExtra\",value:function(t){var e=this,i=Object.assign({},this.state.shoppingList);-1<t&&(i.shoppingListExtras[parseInt(t)].crossedOut=!i.shoppingListExtras[parseInt(t)].crossedOut),this.setState({shoppingList:i},function(){e.saveShoppingList()})}},{key:\"createRecipe\",value:function(){this.setState(function(t){return{currentView:t.views.createRecipe}})}},{key:\"recipeClicked\",value:function(t){var e=this.state.recipes.find(function(e){return e.id===t});if(this.state.creatingShoppingList){var i=JSON.parse(JSON.stringify(this.state.shoppingList)),n=i.shoppingListIngredients,s=JSON.parse(JSON.stringify(e.ingredients));if(0<n.length){var r=s.filter(function(t){return n.some(function(e){return e.name===t.name})});n.forEach(function(t){var e=r.find(function(e){return t.name===e.name});e&&(t.amount=+t.amount+ +e.amount)});var o=s.filter(function(t){return!n.some(function(e){return e.name===t.name})});i.shoppingListIngredients=[].concat(f(n),f(o)),this.setState(function(){return{shoppingList:i}})}else i.shoppingListIngredients=s,this.setState(function(){return{shoppingList:i}})}else this.setState(function(t){return{currentView:t.views.viewRecipe,selectedRecipe:e}})}},{key:\"editRecipe\",value:function(t){var e=this.state.recipes.find(function(e){return e.id===t});this.setState(function(t){return{currentView:t.views.editRecipe,selectedRecipe:e}})}},{key:\"onSubmit\",value:function(t){var e=this;if(this.state.currentView===this.state.views.createRecipe)this.state.recipes.slice(),this.showLoading(),o.firestore.collection(\"Recipes\").doc().set(t).then(function(){console.log(\"Recipe saved successfully\"),e.showLoading(),e.getRecipes()}).catch(function(t){return console.log(\"Error adding document: \",t)});else if(this.state.currentView===this.state.views.editRecipe){var i=t,n=this.state.recipes.slice(),s=n.findIndex(function(t){return t.id===i.id});n[s]=i,this.setState(function(t){return{recipes:n,currentView:t.views.gridLayout}})}}},{key:\"gridLayout\",value:function(){this.setState(function(t){return{currentView:t.views.gridLayout}})}},{key:\"listLayout\",value:function(){this.setState(function(t){return{currentView:t.views.listLayout}})}},{key:\"createShoppingListClicked\",value:function(){var t=this;this.state.creatingShoppingList||this.state.shoppingList?this.setState(function(t){return{creatingShoppingList:!t.creatingShoppingList}}):this.getShoppingList(function(){t.setState(function(t){return{creatingShoppingList:!t.creatingShoppingList}})})}},{key:\"addShoppingListExtras\",value:function(t){var e=this;if(t){var i=this.state.shoppingList;i.shoppingListExtras=t,this.setState({shoppingList:i},function(){e.saveShoppingList()})}}},{key:\"logOutClicked\",value:function(t){t.preventDefault(),o.auth.signOut()}},{key:\"componentDidMount\",value:function(){var t=this;this.setState({isLoading:!1}),o.auth.onAuthStateChanged(function(e){e?(t.setState(function(){return{authUser:e}}),t.getRecipes()):t.setState(function(){return{authUser:null}})})}},{key:\"render\",value:function(){var t,e,i,n=this,r=s.default.createElement(h.RecipeNav,{createRecipe:this.createRecipe,createShoppingList:this.createShoppingListClicked,gridLayout:this.gridLayout,listLayout:this.listLayout,creatingShoppingList:this.state.creatingShoppingList});return this.state.isLoading?s.default.createElement(\"div\",null,\"Loading ...\"):(this.state.authUser?(this.state.currentView===this.state.views.gridLayout||this.state.currentView===this.state.views.listLayout?(t=this.state.recipes.map(function(t,e){return s.default.createElement(p.RecipeItem,{onClick:n.recipeClicked,recipe:t,key:e})}),e=s.default.createElement(\"div\",{id:this.state.currentView===this.state.views.gridLayout?\"recipe-book-grid\":\"recipe-book-list\"},t)):this.state.currentView===this.state.views.createRecipe?e=s.default.createElement(c.RecipeForm,{recipe:this.state.newRecipe,onChange:this.handleInputChanged,onClick:this.addIngredient,onDelete:this.ingredientOnDelete,onSubmit:this.onSubmit}):this.state.currentView===this.state.views.viewRecipe?e=s.default.createElement(u.RecipeView,{recipe:this.state.selectedRecipe,onClick:this.editRecipe}):this.state.currentView===this.state.views.editRecipe&&(e=s.default.createElement(c.RecipeForm,{recipe:this.state.selectedRecipe,newIngredientName:this.state.newIngredientName,onChange:this.handleInputChanged,onClick:this.addIngredient,onDelete:this.ingredientOnDelete,onSubmit:this.onSubmit})),i=this.state.creatingShoppingList&&this.state.currentView!==this.state.views.createRecipe?s.default.createElement(\"div\",null,r,s.default.createElement(\"div\",{className:\"main-flex-wrapper\"},s.default.createElement(\"div\",{className:\"shopping-wrapper\"},s.default.createElement(d.ShoppingList,{shoppingList:this.state.shoppingList.shoppingListIngredients,shoppingListExtras:this.state.shoppingList.shoppingListExtras,onClick:this.addShoppingListExtras,onSave:this.saveShoppingList,deleteShoppingListIngredient:this.deleteShoppingListIngredient,deleteShoppingListExtra:this.deleteShoppingListExtra,crossOutShoppingListIngredient:this.crossOutShoppingListIngredient,crossOutShoppingListExtra:this.crossOutShoppingListExtra,createNewShoppingList:this.newShoppingList})),s.default.createElement(\"div\",{className:\"recipe-book-wrapper\"},e))):s.default.createElement(\"div\",null,r,s.default.createElement(\"div\",{className:\"main-wrapper\"},\" \",e),s.default.createElement(\"button\",{className:\"recipe-button log-out-button\",onClick:this.logOutClicked},\"Log Out\"))):i=s.default.createElement(\"div\",null,s.default.createElement(g.Login,null)),i)}}]),e}();r.default.render(s.default.createElement(L,null),document.getElementById(\"root\"))}});","extractedComments":[]}