{"code":"webpackHotUpdate(0,{61:function(e,t,i){\"use strict\";var n=function(){function e(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=l(i(1)),r=l(i(59)),o=i(15),a=i(37),p=i(36),c=i(32),u=i(27),h=i(26),d=i(21),g=i(20);l(i(11));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var L=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.state={isLoading:!0,authUser:null,currentView:1,views:{gridLayout:1,listLayout:2,createRecipe:3,editRecipe:4,viewRecipe:5},selectedRecipe:{},recipes:[],newRecipe:{name:\"\",description:\"\",newIngredientName:\"\",method:\"\",ingredients:[]},creatingShoppingList:!1,shoppingList:null},i.onSubmit=i.onSubmit.bind(i),i.createRecipe=i.createRecipe.bind(i),i.recipeClicked=i.recipeClicked.bind(i),i.editRecipe=i.editRecipe.bind(i),i.gridLayout=i.gridLayout.bind(i),i.listLayout=i.listLayout.bind(i),i.createShoppingListClicked=i.createShoppingListClicked.bind(i),i.addShoppingListExtras=i.addShoppingListExtras.bind(i),i.logOutClicked=i.logOutClicked.bind(i),i.saveShoppingList=i.saveShoppingList.bind(i),i.newShoppingList=i.newShoppingList.bind(i),i.deleteShoppingListIngredient=i.deleteShoppingListIngredient.bind(i),i.deleteShoppingListExtra=i.deleteShoppingListExtra.bind(i),i.crossOutShoppingListIngredient=i.crossOutShoppingListIngredient.bind(i),i.crossOutShoppingListExtra=i.crossOutShoppingListExtra.bind(i),i}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),n(t,[{key:\"showLoading\",value:function(){this.setState({isLoading:!0})}},{key:\"hideLoading\",value:function(){this.setState({isLoading:!1})}},{key:\"getRecipes\",value:function(){var e=this;this.showLoading(),o.firestore.collection(\"Recipes\").get().then(function(t){var i=t.docs.map(function(e){var t=e.data();return t.id=e.id,t});e.setState(function(e){return{recipes:i,currentView:e.views.gridLayout}}),e.hideLoading()})}},{key:\"getShoppingList\",value:function(e){var t=this;this.showLoading(),o.firestore.collection(\"ShoppingList\").where(\"shoppingListUsed\",\"==\",!1).get().then(function(i){if(1===i.docs.length){var n=i.docs[0].data();t.setState({shoppingList:n}),e&&e(),t.hideLoading()}else t.createNewShoppingList()})}},{key:\"createNewShoppingList\",value:function(){var e=this,t=new Date,i={id:a.IdCreator.createAutoId(),dateCreated:t,shoppingListUsed:!1,shoppingListIngredients:[],shoppingListExtras:[]};this.showLoading(),o.firestore.collection(\"ShoppingList\").doc(i.id).set(i).then(function(){console.log(\"ShoppingListSaved saved successfully\"),e.setState({shoppingList:i}),e.hideLoading()}).catch(function(e){return console.log(\"Error adding document: \",e)})}},{key:\"saveShoppingList\",value:function(){var e=this.state.shoppingList;e.id&&o.firestore.collection(\"ShoppingList\").doc(e.id).set(e).then(function(){}).catch(function(e){return console.log(\"Error adding document: \",e)})}},{key:\"newShoppingList\",value:function(){if(confirm(\"Are you sure you would like to start a new shopping list?\")){var e=this.state.shoppingList;e.shoppingListUsed=!0,this.setState({shoppingList:e}),this.saveShoppingList()}}},{key:\"deleteShoppingListIngredient\",value:function(e){var t=Object.assign({},this.state.shoppingList);-1<e&&t.shoppingListIngredients.splice(e,1),this.setState({shoppingList:t})}},{key:\"crossOutShoppingListIngredient\",value:function(e){var t=this,i=Object.assign({},this.state.shoppingList);-1<e&&(i.shoppingListIngredients[parseInt(e)].crossedOut=!i.shoppingListIngredients[parseInt(e)].crossedOut),this.setState({shoppingList:i},function(){t.saveShoppingList()})}},{key:\"deleteShoppingListExtra\",value:function(e){var t=this,i=Object.assign({},this.state.shoppingList);-1<e&&i.shoppingListExtras.splice(e,1),this.setState({shoppingList:i},function(){t.saveShoppingList()})}},{key:\"crossOutShoppingListExtra\",value:function(e){var t=this,i=Object.assign({},this.state.shoppingList);-1<e&&(i.shoppingListExtras[parseInt(e)].crossedOut=!i.shoppingListExtras[parseInt(e)].crossedOut),this.setState({shoppingList:i},function(){t.saveShoppingList()})}},{key:\"createRecipe\",value:function(){this.setState(function(e){return{currentView:e.views.createRecipe}})}},{key:\"recipeClicked\",value:function(e){var t=this.state.recipes.find(function(t){return t.id===e});if(this.state.creatingShoppingList){var i=JSON.parse(JSON.stringify(this.state.shoppingList)),n=i.shoppingListIngredients,s=JSON.parse(JSON.stringify(t.ingredients));if(0<n.length){var r=s.filter(function(e){return n.some(function(t){return t.name===e.name})});n.forEach(function(e){var t=r.find(function(t){return e.name===t.name});t&&(e.amount=+e.amount+ +t.amount)});var o=s.filter(function(e){return!n.some(function(t){return t.name===e.name})});i.shoppingListIngredients=[].concat(f(n),f(o)),this.setState(function(){return{shoppingList:i}})}else i.shoppingListIngredients=s,this.setState(function(){return{shoppingList:i}})}else this.setState(function(e){return{currentView:e.views.viewRecipe,selectedRecipe:t}})}},{key:\"editRecipe\",value:function(e){var t=this.state.recipes.find(function(t){return t.id===e});this.setState(function(e){return{currentView:e.views.editRecipe,selectedRecipe:t}})}},{key:\"onSubmit\",value:function(e){var t=this;if(this.state.currentView===this.state.views.createRecipe)this.state.recipes.slice(),this.showLoading(),o.firestore.collection(\"Recipes\").doc().set(e).then(function(){console.log(\"Recipe saved successfully\"),t.showLoading(),t.getRecipes()}).catch(function(e){return console.log(\"Error adding document: \",e)});else if(this.state.currentView===this.state.views.editRecipe){var i=e,n=this.state.recipes.slice(),s=n.findIndex(function(e){return e.id===i.id});n[s]=i,this.setState(function(e){return{recipes:n,currentView:e.views.gridLayout}})}}},{key:\"gridLayout\",value:function(){this.setState(function(e){return{currentView:e.views.gridLayout}})}},{key:\"listLayout\",value:function(){this.setState(function(e){return{currentView:e.views.listLayout}})}},{key:\"createShoppingListClicked\",value:function(){var e=this;this.state.creatingShoppingList||this.state.shoppingList?this.setState(function(e){return{creatingShoppingList:!e.creatingShoppingList}}):this.getShoppingList(function(){e.setState(function(e){return{creatingShoppingList:!e.creatingShoppingList}})})}},{key:\"addShoppingListExtras\",value:function(e){var t=this;if(e){var i=this.state.shoppingList;i.shoppingListExtras=e,this.setState({shoppingList:i},function(){t.saveShoppingList()})}}},{key:\"logOutClicked\",value:function(e){e.preventDefault(),o.auth.signOut()}},{key:\"componentDidMount\",value:function(){var e=this;this.setState({isLoading:!1}),o.auth.onAuthStateChanged(function(t){t?(e.setState(function(){return{authUser:t}}),e.getRecipes()):e.setState(function(){return{authUser:null}})})}},{key:\"render\",value:function(){var e,t,i,n=this,r=s.default.createElement(h.RecipeNav,{createRecipe:this.createRecipe,createShoppingList:this.createShoppingListClicked,gridLayout:this.gridLayout,listLayout:this.listLayout,creatingShoppingList:this.state.creatingShoppingList});return this.state.isLoading?s.default.createElement(\"div\",null,\"Loading ...\"):(this.state.authUser?(this.state.currentView===this.state.views.gridLayout||this.state.currentView===this.state.views.listLayout?(e=this.state.recipes.map(function(e,t){return s.default.createElement(p.RecipeItem,{onClick:n.recipeClicked,recipe:e,key:t})}),t=s.default.createElement(\"div\",{id:this.state.currentView===this.state.views.gridLayout?\"recipe-book-grid\":\"recipe-book-list\"},e)):this.state.currentView===this.state.views.createRecipe?t=s.default.createElement(c.RecipeForm,{recipe:this.state.newRecipe,onChange:this.handleInputChanged,onClick:this.addIngredient,onDelete:this.ingredientOnDelete,onSubmit:this.onSubmit}):this.state.currentView===this.state.views.viewRecipe?t=s.default.createElement(u.RecipeView,{recipe:this.state.selectedRecipe,onClick:this.editRecipe}):this.state.currentView===this.state.views.editRecipe&&(t=s.default.createElement(c.RecipeForm,{recipe:this.state.selectedRecipe,newIngredientName:this.state.newIngredientName,onChange:this.handleInputChanged,onClick:this.addIngredient,onDelete:this.ingredientOnDelete,onSubmit:this.onSubmit})),i=this.state.creatingShoppingList&&this.state.currentView!==this.state.views.createRecipe?s.default.createElement(\"div\",null,r,s.default.createElement(\"div\",{className:\"main-flex-wrapper\"},s.default.createElement(\"div\",{className:\"shopping-wrapper\"},s.default.createElement(d.ShoppingList,{shoppingList:this.state.shoppingList.shoppingListIngredients,shoppingListExtras:this.state.shoppingList.shoppingListExtras,onClick:this.addShoppingListExtras,deleteShoppingListIngredient:this.deleteShoppingListIngredient,deleteShoppingListExtra:this.deleteShoppingListExtra,crossOutShoppingListIngredient:this.crossOutShoppingListIngredient,crossOutShoppingListExtra:this.crossOutShoppingListExtra,createNewShoppingList:this.newShoppingList})),s.default.createElement(\"div\",{className:\"recipe-book-wrapper\"},t))):s.default.createElement(\"div\",null,r,s.default.createElement(\"div\",{className:\"main-wrapper\"},\" \",t),s.default.createElement(\"button\",{className:\"recipe-button log-out-button\",onClick:this.logOutClicked},\"Log Out\"))):i=s.default.createElement(\"div\",null,s.default.createElement(g.Login,null)),i)}}]),t}();r.default.render(s.default.createElement(L,null),document.getElementById(\"root\"))}});","extractedComments":[]}