{"map":"{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\"}","code":"webpackHotUpdate(0,{61:function(module,exports,__webpack_require__){\"use strict\";eval(\"var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(59),_reactDom2=_interopRequireDefault(_reactDom),_firebase=__webpack_require__(15),_IdCreator=__webpack_require__(37),_RecipeItem=__webpack_require__(36),_RecipeForm=__webpack_require__(32),_RecipeView=__webpack_require__(27),_nav=__webpack_require__(26),_ShoppingList=__webpack_require__(21),_login=__webpack_require__(20),_reactTextareaAutosize=__webpack_require__(11),_reactTextareaAutosize2=_interopRequireDefault(_reactTextareaAutosize);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\\\\'t been initialised - super() hasn\\\\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var RecipePage=function(a){function b(a){_classCallCheck(this,b);var c=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.state={isLoading:!0,authUser:null,currentView:1,views:{home:1,shoppingList:2,createRecipe:3,editRecipe:4,viewRecipe:5},selectedRecipe:{},recipes:[],newRecipe:{name:'',description:'',newIngredientName:'',method:'',ingredients:[]},creatingShoppingList:!1,shoppingList:null},c.onSubmit=c.onSubmit.bind(c),c.createRecipe=c.createRecipe.bind(c),c.recipeClicked=c.recipeClicked.bind(c),c.editRecipe=c.editRecipe.bind(c),c.gridLayout=c.gridLayout.bind(c),c.listLayout=c.listLayout.bind(c),c.createShoppingListClicked=c.createShoppingListClicked.bind(c),c.addShoppingListExtras=c.addShoppingListExtras.bind(c),c.logOutClicked=c.logOutClicked.bind(c),c.saveShoppingList=c.saveShoppingList.bind(c),c.newShoppingList=c.newShoppingList.bind(c),c.deleteShoppingListIngredient=c.deleteShoppingListIngredient.bind(c),c.deleteShoppingListExtra=c.deleteShoppingListExtra.bind(c),c.crossOutShoppingListIngredient=c.crossOutShoppingListIngredient.bind(c),c.crossOutShoppingListExtra=c.crossOutShoppingListExtra.bind(c),c}return _inherits(b,a),_createClass(b,[{key:'showLoading',value:function showLoading(){this.setState({isLoading:!0})}},{key:'hideLoading',value:function hideLoading(){this.setState({isLoading:!1})}},{key:'getRecipes',value:function getRecipes(){var a=this;this.showLoading(),_firebase.firestore.collection('Recipes').get().then(function(b){var c=b.docs.map(function(a){var b=a.data();return b.id=a.id,b});a.setState(function(a){return{recipes:c,currentView:a.views.home}}),a.hideLoading()})}},{key:'getShoppingList',value:function getShoppingList(a){var b=this;this.showLoading(),_firebase.firestore.collection('ShoppingList').where('shoppingListUsed','==',!1).get().then(function(c){if(1===c.docs.length){var d=c.docs[0].data();b.setState({shoppingList:d}),a&&a(),b.hideLoading()}else b.createNewShoppingList()})}},{key:'createNewShoppingList',value:function createNewShoppingList(){var a=this,b=new Date,c=_IdCreator.IdCreator.createAutoId(),d={id:c,dateCreated:b,shoppingListUsed:!1,shoppingListIngredients:[],shoppingListExtras:[]};this.showLoading(),_firebase.firestore.collection('ShoppingList').doc(d.id).set(d).then(function(){console.log('ShoppingListSaved saved successfully'),a.setState({shoppingList:d}),a.hideLoading()}).catch(function(a){return console.log('Error adding document: ',a)})}},{key:'saveShoppingList',value:function saveShoppingList(){var a=this.state.shoppingList;a.id&&_firebase.firestore.collection('ShoppingList').doc(a.id).set(a).then(function(){}).catch(function(a){return console.log('Error adding document: ',a)})}},{key:'newShoppingList',value:function newShoppingList(){var a=confirm('Are you sure you would like to start a new shopping list?');if(a){var b=this.state.shoppingList;b.shoppingListUsed=!0,this.setState({shoppingList:b}),this.saveShoppingList()}else return}},{key:'deleteShoppingListIngredient',value:function deleteShoppingListIngredient(a){var b=Object.assign({},this.state.shoppingList);-1<a&&b.shoppingListIngredients.splice(a,1),this.setState({shoppingList:b})}},{key:'crossOutShoppingListIngredient',value:function crossOutShoppingListIngredient(a){var b=this,c=Object.assign({},this.state.shoppingList);-1<a&&(c.shoppingListIngredients[parseInt(a)].crossedOut=!c.shoppingListIngredients[parseInt(a)].crossedOut),this.setState({shoppingList:c},function(){b.saveShoppingList()})}},{key:'deleteShoppingListExtra',value:function deleteShoppingListExtra(a){var b=this,c=Object.assign({},this.state.shoppingList);-1<a&&c.shoppingListExtras.splice(a,1),this.setState({shoppingList:c},function(){b.saveShoppingList()})}},{key:'crossOutShoppingListExtra',value:function crossOutShoppingListExtra(a){var b=this,c=Object.assign({},this.state.shoppingList);-1<a&&(c.shoppingListExtras[parseInt(a)].crossedOut=!c.shoppingListExtras[parseInt(a)].crossedOut),this.setState({shoppingList:c},function(){b.saveShoppingList()})}},{key:'createRecipe',value:function createRecipe(){this.setState(function(a){return{currentView:a.views.createRecipe}})}},{key:'recipeClicked',value:function recipeClicked(a){var b=this.state.recipes.find(function(b){return b.id===a});if(this.state.creatingShoppingList){var c=JSON.parse(JSON.stringify(this.state.shoppingList)),d=c.shoppingListIngredients,e=JSON.parse(JSON.stringify(b.ingredients));if(0<d.length){var f=e.filter(function(a){return d.some(function(b){return b.name===a.name})});d.forEach(function(a){var b=f.find(function(b){return a.name===b.name});b&&(a.amount=+a.amount+ +b.amount)});var g=e.filter(function(a){return!d.some(function(b){return b.name===a.name})});c.shoppingListIngredients=[].concat(_toConsumableArray(d),_toConsumableArray(g)),this.setState(function(){return{shoppingList:c}})}else c.shoppingListIngredients=e,this.setState(function(){return{shoppingList:c}})}else this.setState(function(a){return{currentView:a.views.viewRecipe,selectedRecipe:b}})}},{key:'editRecipe',value:function editRecipe(a){var b=this.state.recipes.find(function(b){return b.id===a});this.setState(function(a){return{currentView:a.views.editRecipe,selectedRecipe:b}})}},{key:'onSubmit',value:function onSubmit(a){var b=this;if(this.state.currentView===this.state.views.createRecipe){this.state.recipes.slice();this.showLoading(),_firebase.firestore.collection('Recipes').doc().set(a).then(function(){console.log('Recipe saved successfully'),b.showLoading(),b.getRecipes()}).catch(function(a){return console.log('Error adding document: ',a)})}else if(this.state.currentView===this.state.views.editRecipe){var c=a,d=this.state.recipes.slice(),e=d.findIndex(function(a){return a.id===c.id});d[e]=c,this.setState(function(a){return{recipes:d,currentView:a.views.home}})}}},{key:'homeLayout',value:function homeLayout(){this.setState(function(a){return{currentView:a.views.home}})}},{key:'gridLayout',value:function gridLayout(){this.setState(function(a){return{currentView:a.views.gridLayout}})}},{key:'listLayout',value:function listLayout(){this.setState(function(a){return{currentView:a.views.listLayout}})}},{key:'createShoppingListClicked',value:function createShoppingListClicked(){var a=this;this.setState(function(){return{currentView:a.state.views.shoppingList}})}},{key:'addShoppingListExtras',value:function addShoppingListExtras(a){var b=this;if(a){var c=this.state.shoppingList;c.shoppingListExtras=a,this.setState({shoppingList:c},function(){b.saveShoppingList()})}else return}},{key:'logOutClicked',value:function logOutClicked(a){a.preventDefault(),_firebase.auth.signOut()}},{key:'componentDidMount',value:function componentDidMount(){var a=this;this.setState({isLoading:!1}),_firebase.auth.onAuthStateChanged(function(b){b?(a.setState(function(){return{authUser:b}}),a.getRecipes(),a.getShoppingList()):a.setState(function(){return{authUser:null}})})}},{key:'render',value:function render(){var a,b,c,d=this,e=_react2.default.createElement(_nav.RecipeNav,{createRecipe:this.createRecipe,createShoppingList:this.createShoppingListClicked,homeClicked:this.homeClicked});if(this.state.isLoading)return _react2.default.createElement('div',null,'Loading ...');if(this.state.authUser){debugger;this.state.currentView===this.state.views.home?(a=this.state.recipes.map(function(a,b){return _react2.default.createElement(_RecipeItem.RecipeItem,{onClick:d.recipeClicked,recipe:a,key:b})}),b=_react2.default.createElement('div',{id:this.state.currentView===this.state.views.gridLayout?'recipe-book-grid':'recipe-book-list'},a)):this.state.currentView===this.state.views.createRecipe?b=_react2.default.createElement(_RecipeForm.RecipeForm,{recipe:this.state.newRecipe,onChange:this.handleInputChanged,onClick:this.addIngredient,onDelete:this.ingredientOnDelete,onSubmit:this.onSubmit}):this.state.currentView===this.state.views.viewRecipe?b=_react2.default.createElement(_RecipeView.RecipeView,{recipe:this.state.selectedRecipe,onClick:this.editRecipe}):this.state.currentView===this.state.views.editRecipe&&(b=_react2.default.createElement(_RecipeForm.RecipeForm,{recipe:this.state.selectedRecipe,newIngredientName:this.state.newIngredientName,onChange:this.handleInputChanged,onClick:this.addIngredient,onDelete:this.ingredientOnDelete,onSubmit:this.onSubmit})),this.state.currentView===this.state.views.shoppingList?(a=this.state.recipes.map(function(a,b){return _react2.default.createElement(_RecipeItem.RecipeItem,{onClick:d.recipeClicked,recipe:a,key:b})}),c=_react2.default.createElement('div',null,e,_react2.default.createElement('div',{className:'main-flex-wrapper'},_react2.default.createElement('div',{className:'shopping-wrapper'},_react2.default.createElement(_ShoppingList.ShoppingList,{shoppingList:this.state.shoppingList.shoppingListIngredients,shoppingListExtras:this.state.shoppingList.shoppingListExtras,onClick:this.addShoppingListExtras,deleteShoppingListIngredient:this.deleteShoppingListIngredient,deleteShoppingListExtra:this.deleteShoppingListExtra,crossOutShoppingListIngredient:this.crossOutShoppingListIngredient,crossOutShoppingListExtra:this.crossOutShoppingListExtra,createNewShoppingList:this.newShoppingList})),_react2.default.createElement('div',{className:'recipe-book-wrapper'},_react2.default.createElement('div',{id:this.state.currentView===this.state.views.gridLayout?'recipe-book-grid':'recipe-book-list'},a))))):c=_react2.default.createElement('div',null,e,_react2.default.createElement('div',{className:'main-wrapper'},' ',b),_react2.default.createElement('button',{className:'recipe-button log-out-button',onClick:this.logOutClicked},'Log Out'))}else c=_react2.default.createElement('div',null,_react2.default.createElement(_login.Login,null));return c}}]),b}(_react2.default.Component);_reactDom2.default.render(_react2.default.createElement(RecipePage,null),document.getElementById('root'));\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvYXBwL2luZGV4LmpzeD83YThjIl0sIm5hbWVzIjpbIlJlY2lwZVBhZ2UiLCJzdGF0ZSIsImlzTG9hZGluZyIsImF1dGhVc2VyIiwiY3VycmVudFZpZXciLCJ2aWV3cyIsImhvbWUiLCJzaG9wcGluZ0xpc3QiLCJjcmVhdGVSZWNpcGUiLCJlZGl0UmVjaXBlIiwidmlld1JlY2lwZSIsInNlbGVjdGVkUmVjaXBlIiwicmVjaXBlcyIsIm5ld1JlY2lwZSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsIm5ld0luZ3JlZGllbnROYW1lIiwibWV0aG9kIiwiaW5ncmVkaWVudHMiLCJjcmVhdGluZ1Nob3BwaW5nTGlzdCIsIm9uU3VibWl0IiwiYmluZCIsInJlY2lwZUNsaWNrZWQiLCJncmlkTGF5b3V0IiwibGlzdExheW91dCIsImNyZWF0ZVNob3BwaW5nTGlzdENsaWNrZWQiLCJhZGRTaG9wcGluZ0xpc3RFeHRyYXMiLCJsb2dPdXRDbGlja2VkIiwic2F2ZVNob3BwaW5nTGlzdCIsIm5ld1Nob3BwaW5nTGlzdCIsImRlbGV0ZVNob3BwaW5nTGlzdEluZ3JlZGllbnQiLCJkZWxldGVTaG9wcGluZ0xpc3RFeHRyYSIsImNyb3NzT3V0U2hvcHBpbmdMaXN0SW5ncmVkaWVudCIsImNyb3NzT3V0U2hvcHBpbmdMaXN0RXh0cmEiLCJzZXRTdGF0ZSIsInNob3dMb2FkaW5nIiwiY29sbGVjdGlvbiIsImdldCIsInRoZW4iLCJkb2NzIiwibWFwIiwiZGF0YSIsImlkIiwiaGlkZUxvYWRpbmciLCJ3aGVyZSIsImxlbmd0aCIsImNyZWF0ZU5ld1Nob3BwaW5nTGlzdCIsIkRhdGUiLCJjcmVhdGVBdXRvSWQiLCJkYXRlQ3JlYXRlZCIsInNob3BwaW5nTGlzdFVzZWQiLCJzaG9wcGluZ0xpc3RJbmdyZWRpZW50cyIsInNob3BwaW5nTGlzdEV4dHJhcyIsImRvYyIsInNldCIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImNvbmZpcm0iLCJPYmplY3QiLCJhc3NpZ24iLCJzcGxpY2UiLCJwYXJzZUludCIsImNyb3NzZWRPdXQiLCJmaW5kIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiZmlsdGVyIiwic29tZSIsImZvckVhY2giLCJhbW91bnQiLCJzbGljZSIsImdldFJlY2lwZXMiLCJmaW5kSW5kZXgiLCJwcmV2ZW50RGVmYXVsdCIsInNpZ25PdXQiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJnZXRTaG9wcGluZ0xpc3QiLCJob21lQ2xpY2tlZCIsImhhbmRsZUlucHV0Q2hhbmdlZCIsImFkZEluZ3JlZGllbnQiLCJpbmdyZWRpZW50T25EZWxldGUiLCJDb21wb25lbnQiLCJyZW5kZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiZ21EQWNNQSxXLGFBQ0osYUFBbUIsMkhBRWpCLEdBQUtDLEtBQUwsQ0FBYSxDQUNYQyxZQURXLENBRVhDLFNBQVUsSUFGQyxDQUdYQyxZQUFhLENBSEYsQ0FJWEMsTUFBTyxDQUFFQyxLQUFNLENBQVIsQ0FBV0MsYUFBYyxDQUF6QixDQUE0QkMsYUFBYyxDQUExQyxDQUE2Q0MsV0FBWSxDQUF6RCxDQUE0REMsV0FBWSxDQUF4RSxDQUpJLENBS1hDLGVBQWdCLEVBTEwsQ0FNWEMsUUFBUyxFQU5FLENBT1hDLFVBQVcsQ0FDVEMsS0FBTSxFQURHLENBRVRDLFlBQWEsRUFGSixDQUdUQyxrQkFBbUIsRUFIVixDQUlUQyxPQUFRLEVBSkMsQ0FLVEMsWUFBYSxFQUxKLENBUEEsQ0FjWEMsdUJBZFcsQ0FlWFosYUFBYyxJQWZILENBRkksQ0FtQmpCLEVBQUthLFFBQUwsQ0FBZ0IsRUFBS0EsUUFBTCxDQUFjQyxJQUFkLEdBbkJDLENBb0JqQixFQUFLYixZQUFMLENBQW9CLEVBQUtBLFlBQUwsQ0FBa0JhLElBQWxCLEdBcEJILENBcUJqQixFQUFLQyxhQUFMLENBQXFCLEVBQUtBLGFBQUwsQ0FBbUJELElBQW5CLEdBckJKLENBc0JqQixFQUFLWixVQUFMLENBQWtCLEVBQUtBLFVBQUwsQ0FBZ0JZLElB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LENBbENtQixFQXdEckIsRUFDRSwyQ0FFRSxxQ0FBSyxVQUFVLGNBQWYsUUFGRixDQUdFLHdDQUFRLFVBQVUsOEJBQWxCLENBQWlELFFBQVMsS0FBS0ksYUFBL0QsWUFIRixDQU1MLENBL0RELElBZ0VFLEdBQ0UseUNBQ0UsZ0RBREYsQ0FqRUosQ0FxRUEsUUFHRCxDLE9BdFlzQixnQkFBTXdELFMsRUFpWi9CLG1CQUFTQyxNQUFULENBQWdCLDhCQUFDLFVBQUQsTUFBaEIsQ0FDRUMsU0FBU0MsY0FBVCxDQUF3QixNQUF4QixDQURGLEMiLCJmaWxlIjoiNjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUmVhY3RET00sIHsgcmVuZGVyIH0gZnJvbSAncmVhY3QtZG9tJztcclxuaW1wb3J0IHsgYXV0aCB9IGZyb20gJy4vZmlyZWJhc2UuanN4JztcclxuaW1wb3J0IHsgcmVjaXBlREIgfSBmcm9tICcuL2ZpcmViYXNlLmpzeCc7XHJcbmltcG9ydCB7IGZpcmVzdG9yZSB9IGZyb20gJy4vZmlyZWJhc2UuanN4JztcclxuaW1wb3J0IHsgSWRDcmVhdG9yIH0gZnJvbSAnLi9JZENyZWF0b3IuanMnO1xyXG5pbXBvcnQgeyBSZWNpcGVJdGVtIH0gZnJvbSAnLi9SZWNpcGVJdGVtLmpzeCc7XHJcbmltcG9ydCB7IFJlY2lwZUZvcm0gfSBmcm9tICcuL1JlY2lwZUZvcm0uanN4JztcclxuaW1wb3J0IHsgUmVjaXBlVmlldyB9IGZyb20gJy4vUmVjaXBlVmlldy5qc3gnO1xyXG5pbXBvcnQgeyBSZWNpcGVOYXYgfSBmcm9tICcuL25hdi5qc3gnO1xyXG5pbXBvcnQgeyBTaG9wcGluZ0xpc3QgfSBmcm9tICcuL1Nob3BwaW5nTGlzdC5qc3gnO1xyXG5pbXBvcnQgeyBMb2dpbiB9IGZyb20gJy4vbG9naW4uanN4JztcclxuaW1wb3J0IFRleHRhcmVhIGZyb20gXCJyZWFjdC10ZXh0YXJlYS1hdXRvc2l6ZVwiO1xyXG5cclxuY2xhc3MgUmVjaXBlUGFnZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcclxuICAgIHN1cGVyKHByb3BzKTtcclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGlzTG9hZGluZzogdHJ1ZSxcclxuICAgICAgYXV0aFVzZXI6IG51bGwsXHJcbiAgICAgIGN1cnJlbnRWaWV3OiAxLFxyXG4gICAgICB2aWV3czogeyBob21lOiAxLCBzaG9wcGluZ0xpc3Q6IDIsIGNyZWF0ZVJlY2lwZTogMywgZWRpdFJlY2lwZTogNCwgdmlld1JlY2lwZTogNSB9LFxyXG4gICAgICBzZWxlY3RlZFJlY2lwZToge30sXHJcbiAgICAgIHJlY2lwZXM6IFtdLFxyXG4gICAgICBuZXdSZWNpcGU6IHtcclxuICAgICAgICBuYW1lOiBcIlwiLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIlwiLFxyXG4gICAgICAgIG5ld0luZ3JlZGllbnROYW1lOiBcIlwiLFxyXG4gICAgICAgIG1ldGhvZDogXCJcIixcclxuICAgICAgICBpbmdyZWRpZW50czogW11cclxuICAgICAgfSxcclxuICAgICAgY3JlYXRpbmdTaG9wcGluZ0xpc3Q6IGZhbHNlLFxyXG4gICAgICBzaG9wcGluZ0xpc3Q6IG51bGxcclxuICAgIH1cclxuICAgIHRoaXMub25TdWJtaXQgPSB0aGlzLm9uU3VibWl0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmNyZWF0ZVJlY2lwZSA9IHRoaXMuY3JlYXRlUmVjaXBlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnJlY2lwZUNsaWNrZWQgPSB0aGlzLnJlY2lwZUNsaWNrZWQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZWRpdFJlY2lwZSA9IHRoaXMuZWRpdFJlY2lwZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5ncmlkTGF5b3V0ID0gdGhpcy5ncmlkTGF5b3V0LmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLmxpc3RMYXlvdXQgPSB0aGlzLmxpc3RMYXlvdXQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY3JlYXRlU2hvcHBpbmdMaXN0Q2xpY2tlZCA9IHRoaXMuY3JlYXRlU2hvcHBpbmdMaXN0Q2xpY2tlZC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5hZGRTaG9wcGluZ0xpc3RFeHRyYXMgPSB0aGlzLmFkZFNob3BwaW5nTGlzdEV4dHJhcy5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5sb2dPdXRDbGlja2VkID0gdGhpcy5sb2dPdXRDbGlja2VkLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLnNhdmVTaG9wcGluZ0xpc3QgPSB0aGlzLnNhdmVTaG9wcGluZ0xpc3QuYmluZCh0aGlzKTtcclxuICAgIHRoaXMubmV3U2hvcHBpbmdMaXN0ID0gdGhpcy5uZXdTaG9wcGluZ0xpc3QuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuZGVsZXRlU2hvcHBpbmdMaXN0SW5ncmVkaWVudCA9IHRoaXMuZGVsZXRlU2hvcHBpbmdMaXN0SW5ncmVkaWVudC5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5kZWxldGVTaG9wcGluZ0xpc3RFeHRyYSA9IHRoaXMuZGVsZXRlU2hvcHBpbmdMaXN0RXh0cmEuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY3Jvc3NPdXRTaG9wcGluZ0xpc3RJbmdyZWRpZW50ID0gdGhpcy5jcm9zc091dFNob3BwaW5nTGlzdEluZ3JlZGllbnQuYmluZCh0aGlzKTtcclxuICAgIHRoaXMuY3Jvc3NPdXRTaG9wcGluZ0xpc3RFeHRyYSA9IHRoaXMuY3Jvc3NPdXRTaG9wcGluZ0xpc3RFeHRyYS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuICBzaG93TG9hZGluZygpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBpc0xvYWRpbmc6IHRydWVcclxuICAgIH0pO1xyXG4gIH1cclxuICBoaWRlTG9hZGluZygpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICBpc0xvYWRpbmc6IGZhbHNlXHJcbiAgICB9KTtcclxuICB9XHJcbiAgZ2V0UmVjaXBlcygpIHtcclxuICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgIGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdSZWNpcGVzJykuZ2V0KCkudGhlbihxdWVyeVNuYXBzaG90ID0+IHtcclxuICAgICAgbGV0IHJlY2lwZXMgPSBxdWVyeVNuYXBzaG90LmRvY3MubWFwKGRvYyA9PiB7XHJcbiAgICAgICAgbGV0IHJlY2lwZSA9IGRvYy5kYXRhKCk7XHJcbiAgICAgICAgcmVjaXBlLmlkID0gZG9jLmlkO1xyXG4gICAgICAgIHJldHVybiByZWNpcGU7XHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUpID0+ICh7XHJcbiAgICAgICAgcmVjaXBlczogcmVjaXBlcyxcclxuICAgICAgICBjdXJyZW50VmlldzogcHJldlN0YXRlLnZpZXdzLmhvbWVcclxuICAgICAgfVxyXG4gICAgICApKTtcclxuICAgICAgdGhpcy5oaWRlTG9hZGluZygpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGdldFNob3BwaW5nTGlzdChjYWxsYmFjaykge1xyXG4gICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ1Nob3BwaW5nTGlzdCcpLndoZXJlKFwic2hvcHBpbmdMaXN0VXNlZFwiLCAnPT0nLCBmYWxzZSkuZ2V0KCkudGhlbihxdWVyeVNuYXBzaG90ID0+IHtcclxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZG9jcy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICBsZXQgc2hvcHBpbmdMaXN0ID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgIHNob3BwaW5nTGlzdDogc2hvcHBpbmdMaXN0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhpZGVMb2FkaW5nKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVOZXdTaG9wcGluZ0xpc3QoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGNyZWF0ZU5ld1Nob3BwaW5nTGlzdCgpIHtcclxuICAgIGNvbnN0IGRhdGVDcmVhdGVkID0gbmV3IERhdGUoKSxcclxuICAgICAgaWQgPSBJZENyZWF0b3IuY3JlYXRlQXV0b0lkKCk7XHJcbiAgICBsZXQgc2hvcHBpbmdMaXN0ID0ge1xyXG4gICAgICBpZDogaWQsXHJcbiAgICAgIGRhdGVDcmVhdGVkOiBkYXRlQ3JlYXRlZCxcclxuICAgICAgc2hvcHBpbmdMaXN0VXNlZDogZmFsc2UsXHJcbiAgICAgIHNob3BwaW5nTGlzdEluZ3JlZGllbnRzOiBbXSxcclxuICAgICAgc2hvcHBpbmdMaXN0RXh0cmFzOiBbXVxyXG4gICAgfVxyXG4gICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgZmlyZXN0b3JlLmNvbGxlY3Rpb24oJ1Nob3BwaW5nTGlzdCcpLmRvYyhzaG9wcGluZ0xpc3QuaWQpLnNldChzaG9wcGluZ0xpc3QpXHJcbiAgICAgIC50aGVuKGRvY1JlZiA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTaG9wcGluZ0xpc3RTYXZlZCBzYXZlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICBzaG9wcGluZ0xpc3Q6IHNob3BwaW5nTGlzdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaGlkZUxvYWRpbmcoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKFwiRXJyb3IgYWRkaW5nIGRvY3VtZW50OiBcIiwgZXJyb3IpKTtcclxuICB9XHJcbiAgc2F2ZVNob3BwaW5nTGlzdCgpIHtcclxuICAgIGNvbnN0IHNob3BwaW5nTGlzdCA9IHRoaXMuc3RhdGUuc2hvcHBpbmdMaXN0O1xyXG4gICAgaWYgKHNob3BwaW5nTGlzdC5pZCkge1xyXG4gICAgICAvLyB0aGlzLnNob3dMb2FkaW5nKCk7XHJcbiAgICAgIGZpcmVzdG9yZS5jb2xsZWN0aW9uKCdTaG9wcGluZ0xpc3QnKS5kb2Moc2hvcHBpbmdMaXN0LmlkKS5zZXQoc2hvcHBpbmdMaXN0KVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiU2hvcHBpbmdMaXN0U2F2ZWQgc2F2ZWQgc3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgICAgLy8gdGhpcy5nZXRTaG9wcGluZ0xpc3QoKTtcclxuICAgICAgICAgIC8vIHRoaXMuaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhcIkVycm9yIGFkZGluZyBkb2N1bWVudDogXCIsIGVycm9yKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIG5ld1Nob3BwaW5nTGlzdCgpIHtcclxuICAgIGxldCBjb25maXJtUmVzcG9uc2UgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3b3VsZCBsaWtlIHRvIHN0YXJ0IGEgbmV3IHNob3BwaW5nIGxpc3Q/XCIpO1xyXG4gICAgaWYgKGNvbmZpcm1SZXNwb25zZSkge1xyXG4gICAgICBsZXQgc2hvcHBpbmdMaXN0ID0gdGhpcy5zdGF0ZS5zaG9wcGluZ0xpc3Q7XHJcbiAgICAgIHNob3BwaW5nTGlzdC5zaG9wcGluZ0xpc3RVc2VkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgc2hvcHBpbmdMaXN0OiBzaG9wcGluZ0xpc3RcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMuc2F2ZVNob3BwaW5nTGlzdCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxuICBkZWxldGVTaG9wcGluZ0xpc3RJbmdyZWRpZW50KGluZGV4KSB7XHJcbiAgICB2YXIgc2hvcHBpbmdMaXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zdGF0ZS5zaG9wcGluZ0xpc3QpO1xyXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgc2hvcHBpbmdMaXN0LnNob3BwaW5nTGlzdEluZ3JlZGllbnRzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHsgc2hvcHBpbmdMaXN0OiBzaG9wcGluZ0xpc3QgfSk7XHJcbiAgfVxyXG4gIGNyb3NzT3V0U2hvcHBpbmdMaXN0SW5ncmVkaWVudChpbmRleCkge1xyXG4gICAgdmFyIHNob3BwaW5nTGlzdCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc3RhdGUuc2hvcHBpbmdMaXN0KTtcclxuICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgIHNob3BwaW5nTGlzdC5zaG9wcGluZ0xpc3RJbmdyZWRpZW50c1twYXJzZUludChpbmRleCldLmNyb3NzZWRPdXQgPSBzaG9wcGluZ0xpc3Quc2hvcHBpbmdMaXN0SW5ncmVkaWVudHNbcGFyc2VJbnQoaW5kZXgpXS5jcm9zc2VkT3V0ID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2V0U3RhdGUoXHJcbiAgICAgIHsgc2hvcHBpbmdMaXN0OiBzaG9wcGluZ0xpc3QgfSxcclxuICAgICAgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2F2ZVNob3BwaW5nTGlzdCgpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgZGVsZXRlU2hvcHBpbmdMaXN0RXh0cmEoaW5kZXgpIHtcclxuICAgIHZhciBzaG9wcGluZ0xpc3QgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnN0YXRlLnNob3BwaW5nTGlzdCk7XHJcbiAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICBzaG9wcGluZ0xpc3Quc2hvcHBpbmdMaXN0RXh0cmFzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgc2hvcHBpbmdMaXN0OiBzaG9wcGluZ0xpc3RcclxuICAgIH0sICgpID0+IHtcclxuICAgICAgdGhpcy5zYXZlU2hvcHBpbmdMaXN0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgY3Jvc3NPdXRTaG9wcGluZ0xpc3RFeHRyYShpbmRleCkge1xyXG4gICAgdmFyIHNob3BwaW5nTGlzdCA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc3RhdGUuc2hvcHBpbmdMaXN0KTtcclxuICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgIHNob3BwaW5nTGlzdC5zaG9wcGluZ0xpc3RFeHRyYXNbcGFyc2VJbnQoaW5kZXgpXS5jcm9zc2VkT3V0ID0gc2hvcHBpbmdMaXN0LnNob3BwaW5nTGlzdEV4dHJhc1twYXJzZUludChpbmRleCldLmNyb3NzZWRPdXQgPyBmYWxzZSA6IHRydWU7XHJcbiAgICB9XHJcbiAgICB0aGlzLnNldFN0YXRlKFxyXG4gICAgICB7IHNob3BwaW5nTGlzdDogc2hvcHBpbmdMaXN0IH0sXHJcbiAgICAgICgpID0+IHtcclxuICAgICAgICB0aGlzLnNhdmVTaG9wcGluZ0xpc3QoKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gIGNyZWF0ZVJlY2lwZSgpIHtcclxuICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gKHtcclxuICAgICAgY3VycmVudFZpZXc6IHByZXZTdGF0ZS52aWV3cy5jcmVhdGVSZWNpcGVcclxuICAgIH0pKTtcclxuICB9XHJcbiAgcmVjaXBlQ2xpY2tlZChyZWNpcGVJZCkge1xyXG4gICAgdmFyIHNlbGVjdGVkUmVjaXBlID0gdGhpcy5zdGF0ZS5yZWNpcGVzLmZpbmQoKHJlY2lwZSkgPT4geyByZXR1cm4gcmVjaXBlLmlkID09PSByZWNpcGVJZDsgfSk7XHJcbiAgICBpZiAodGhpcy5zdGF0ZS5jcmVhdGluZ1Nob3BwaW5nTGlzdCkge1xyXG4gICAgICBsZXQgc2hvcHBpbmdMaXN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLnNob3BwaW5nTGlzdCkpLFxyXG4gICAgICAgIHNob3BwaW5nTGlzdEluZ3JlZGllbnRzID0gc2hvcHBpbmdMaXN0LnNob3BwaW5nTGlzdEluZ3JlZGllbnRzLFxyXG4gICAgICAgIGluZ3JlZGllbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzZWxlY3RlZFJlY2lwZS5pbmdyZWRpZW50cykpOztcclxuXHJcbiAgICAgIGlmIChzaG9wcGluZ0xpc3RJbmdyZWRpZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgbGV0IG1hdGNoZWRJbmdyZWRpZW50cyA9IGluZ3JlZGllbnRzLmZpbHRlcihpbmdyZWRpZW50ID0+IHtcclxuICAgICAgICAgIHJldHVybiBzaG9wcGluZ0xpc3RJbmdyZWRpZW50cy5zb21lKGxpc3RJdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3RJdGVtLm5hbWUgPT09IGluZ3JlZGllbnQubmFtZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNob3BwaW5nTGlzdEluZ3JlZGllbnRzLmZvckVhY2gobGlzdEl0ZW0gPT4ge1xyXG4gICAgICAgICAgdmFyIG1hdGNoZWRJdGVtID0gbWF0Y2hlZEluZ3JlZGllbnRzLmZpbmQoeCA9PiBsaXN0SXRlbS5uYW1lID09PSB4Lm5hbWUpO1xyXG4gICAgICAgICAgaWYgKG1hdGNoZWRJdGVtKSB7XHJcbiAgICAgICAgICAgIGxpc3RJdGVtLmFtb3VudCA9IE51bWJlcihsaXN0SXRlbS5hbW91bnQpICsgTnVtYmVyKG1hdGNoZWRJdGVtLmFtb3VudCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGxldCBuZXdJdGVtcyA9IGluZ3JlZGllbnRzLmZpbHRlcigoaW5ncmVkaWVudCkgPT4geyByZXR1cm4gc2hvcHBpbmdMaXN0LmZpbmRJbmRleChpbmdyZWRpZW50Lm5hbWUpID09IC0xOyB9KVxyXG4gICAgICAgIGNvbnN0IG5ld0l0ZW1zID0gaW5ncmVkaWVudHMuZmlsdGVyKGluZ3JlZGllbnQgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuICFzaG9wcGluZ0xpc3RJbmdyZWRpZW50cy5zb21lKGxpc3RJdGVtID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGxpc3RJdGVtLm5hbWUgPT09IGluZ3JlZGllbnQubmFtZTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNob3BwaW5nTGlzdC5zaG9wcGluZ0xpc3RJbmdyZWRpZW50cyA9IFsuLi5zaG9wcGluZ0xpc3RJbmdyZWRpZW50cywgLi4ubmV3SXRlbXNdO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gKHtcclxuICAgICAgICAgIHNob3BwaW5nTGlzdDogc2hvcHBpbmdMaXN0XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNob3BwaW5nTGlzdC5zaG9wcGluZ0xpc3RJbmdyZWRpZW50cyA9IGluZ3JlZGllbnRzO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gKHtcclxuICAgICAgICAgIHNob3BwaW5nTGlzdDogc2hvcHBpbmdMaXN0XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiAoe1xyXG4gICAgICAgIGN1cnJlbnRWaWV3OiBwcmV2U3RhdGUudmlld3Mudmlld1JlY2lwZSxcclxuICAgICAgICBzZWxlY3RlZFJlY2lwZTogc2VsZWN0ZWRSZWNpcGVcclxuICAgICAgfSkpO1xyXG4gICAgfVxyXG4gIH1cclxuICBlZGl0UmVjaXBlKHJlY2lwZUlkKSB7XHJcbiAgICB2YXIgc2VsZWN0ZWRSZWNpcGUgPSB0aGlzLnN0YXRlLnJlY2lwZXMuZmluZCgocmVjaXBlKSA9PiB7IHJldHVybiByZWNpcGUuaWQgPT09IHJlY2lwZUlkIH0pO1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiAoe1xyXG4gICAgICBjdXJyZW50VmlldzogcHJldlN0YXRlLnZpZXdzLmVkaXRSZWNpcGUsXHJcbiAgICAgIHNlbGVjdGVkUmVjaXBlOiBzZWxlY3RlZFJlY2lwZVxyXG4gICAgfSkpO1xyXG4gIH1cclxuICBvblN1Ym1pdChyZWNpcGUpIHtcclxuICAgIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRWaWV3ID09PSB0aGlzLnN0YXRlLnZpZXdzLmNyZWF0ZVJlY2lwZSkge1xyXG4gICAgICBsZXQgbmV3UmVjaXBlID0gcmVjaXBlLFxyXG4gICAgICAgIHJlY2lwZXMgPSB0aGlzLnN0YXRlLnJlY2lwZXMuc2xpY2UoKTtcclxuICAgICAgdGhpcy5zaG93TG9hZGluZygpO1xyXG4gICAgICBmaXJlc3RvcmUuY29sbGVjdGlvbignUmVjaXBlcycpLmRvYygpLnNldChyZWNpcGUpXHJcbiAgICAgICAgLnRoZW4oZG9jUmVmID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiUmVjaXBlIHNhdmVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgIHRoaXMuZ2V0UmVjaXBlcygpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKFwiRXJyb3IgYWRkaW5nIGRvY3VtZW50OiBcIiwgZXJyb3IpKTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT09IHRoaXMuc3RhdGUudmlld3MuZWRpdFJlY2lwZSkge1xyXG4gICAgICBsZXQgZWRpdGVkUmVjaXBlID0gcmVjaXBlLFxyXG4gICAgICAgIHJlY2lwZXMgPSB0aGlzLnN0YXRlLnJlY2lwZXMuc2xpY2UoKSxcclxuICAgICAgICBjdXJyZW50SW5kZXggPSByZWNpcGVzLmZpbmRJbmRleCgocmVjaXBlKSA9PiB7IHJldHVybiByZWNpcGUuaWQgPT09IGVkaXRlZFJlY2lwZS5pZCB9KTtcclxuXHJcbiAgICAgIHJlY2lwZXNbY3VycmVudEluZGV4XSA9IGVkaXRlZFJlY2lwZTtcclxuICAgICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiAoe1xyXG4gICAgICAgIHJlY2lwZXM6IHJlY2lwZXMsXHJcbiAgICAgICAgY3VycmVudFZpZXc6IHByZXZTdGF0ZS52aWV3cy5ob21lXHJcbiAgICAgIH1cclxuICAgICAgKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGhvbWVMYXlvdXQoKXtcclxuICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gKHtcclxuICAgICAgY3VycmVudFZpZXc6IHByZXZTdGF0ZS52aWV3cy5ob21lXHJcbiAgICB9KSk7XHJcbiAgfVxyXG4gIGdyaWRMYXlvdXQoKSB7XHJcbiAgICB0aGlzLnNldFN0YXRlKChwcmV2U3RhdGUpID0+ICh7XHJcbiAgICAgIGN1cnJlbnRWaWV3OiBwcmV2U3RhdGUudmlld3MuZ3JpZExheW91dFxyXG4gICAgfSkpO1xyXG4gIH1cclxuICBsaXN0TGF5b3V0KCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSgocHJldlN0YXRlKSA9PiAoe1xyXG4gICAgICBjdXJyZW50VmlldzogcHJldlN0YXRlLnZpZXdzLmxpc3RMYXlvdXRcclxuICAgIH0pKTtcclxuICB9XHJcbiAgY3JlYXRlU2hvcHBpbmdMaXN0Q2xpY2tlZCgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKChwcmV2KSA9PiAoe1xyXG4gICAgICAgICAgY3VycmVudFZpZXc6IHRoaXMuc3RhdGUudmlld3Muc2hvcHBpbmdMaXN0XHJcbiAgICAgIH0pKTtcclxuICB9XHJcbiAgYWRkU2hvcHBpbmdMaXN0RXh0cmFzKHNob3BwaW5nTGlzdEV4dHJhcykge1xyXG4gICAgaWYgKHNob3BwaW5nTGlzdEV4dHJhcykge1xyXG4gICAgICBsZXQgc2hvcHBpbmdMaXN0ID0gdGhpcy5zdGF0ZS5zaG9wcGluZ0xpc3Q7XHJcbiAgICAgIHNob3BwaW5nTGlzdC5zaG9wcGluZ0xpc3RFeHRyYXMgPSBzaG9wcGluZ0xpc3RFeHRyYXM7XHJcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgIHNob3BwaW5nTGlzdDogc2hvcHBpbmdMaXN0XHJcbiAgICAgIH0sICgpID0+IHtcclxuICAgICAgICB0aGlzLnNhdmVTaG9wcGluZ0xpc3QoKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG4gIGxvZ091dENsaWNrZWQoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgYXV0aC5zaWduT3V0KCk7XHJcbiAgfVxyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgIGlzTG9hZGluZzogZmFsc2VcclxuICAgIH0pXHJcbiAgICBhdXRoLm9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoVXNlciA9PiB7XHJcbiAgICAgIGlmIChhdXRoVXNlcikge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKCkgPT4gKHsgYXV0aFVzZXIgfSkpO1xyXG4gICAgICAgIHRoaXMuZ2V0UmVjaXBlcygpO1xyXG4gICAgICAgIHRoaXMuZ2V0U2hvcHBpbmdMaXN0KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSgoKSA9PiAoeyBhdXRoVXNlcjogbnVsbCB9KSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICByZW5kZXIoKSB7XHJcbiAgICB2YXIgcmVjaXBlcyxcclxuICAgICAgY29udGVudCxcclxuICAgICAgd3JhcHBlcixcclxuICAgICAgbmF2ID0gPFJlY2lwZU5hdlxyXG4gICAgICAgIGNyZWF0ZVJlY2lwZT17dGhpcy5jcmVhdGVSZWNpcGV9XHJcbiAgICAgICAgY3JlYXRlU2hvcHBpbmdMaXN0PXt0aGlzLmNyZWF0ZVNob3BwaW5nTGlzdENsaWNrZWR9XHJcbiAgICAgICAgaG9tZUNsaWNrZWQ9e3RoaXMuaG9tZUNsaWNrZWR9XHJcbiAgICAgICAgIC8+O1xyXG5cclxuICAgIGlmICh0aGlzLnN0YXRlLmlzTG9hZGluZykge1xyXG4gICAgICByZXR1cm4gKDxkaXY+XHJcbiAgICAgICAgTG9hZGluZyAuLi5cclxuICAgICAgPC9kaXY+KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5zdGF0ZS5hdXRoVXNlcikge1xyXG4gICAgICBkZWJ1Z2dlcjtcclxuICAgICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT09IHRoaXMuc3RhdGUudmlld3MuaG9tZSkge1xyXG4gICAgICAgIHJlY2lwZXMgPSB0aGlzLnN0YXRlLnJlY2lwZXMubWFwKChyZWNpcGUsIGluZGV4KSA9PlxyXG4gICAgICAgICAgPFJlY2lwZUl0ZW0gb25DbGljaz17dGhpcy5yZWNpcGVDbGlja2VkfSByZWNpcGU9e3JlY2lwZX0ga2V5PXtpbmRleH0gLz4sXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb250ZW50ID0gPGRpdiBpZD17dGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PT0gdGhpcy5zdGF0ZS52aWV3cy5ncmlkTGF5b3V0ID8gJ3JlY2lwZS1ib29rLWdyaWQnIDogJ3JlY2lwZS1ib29rLWxpc3QnfT5cclxuICAgICAgICAgIHtyZWNpcGVzfVxyXG4gICAgICAgIDwvZGl2PjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRWaWV3ID09PSB0aGlzLnN0YXRlLnZpZXdzLmNyZWF0ZVJlY2lwZSkge1xyXG4gICAgICAgIGNvbnRlbnQgPSA8UmVjaXBlRm9ybSByZWNpcGU9e3RoaXMuc3RhdGUubmV3UmVjaXBlfVxyXG4gICAgICAgICAgLy8gbmV3SW5ncmVkaWVudE5hbWU9e3RoaXMuc3RhdGUubmV3SW5ncmVkaWVudE5hbWV9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVJbnB1dENoYW5nZWR9XHJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmFkZEluZ3JlZGllbnR9XHJcbiAgICAgICAgICBvbkRlbGV0ZT17dGhpcy5pbmdyZWRpZW50T25EZWxldGV9XHJcbiAgICAgICAgICBvblN1Ym1pdD17dGhpcy5vblN1Ym1pdH0gLz47XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSBpZiAodGhpcy5zdGF0ZS5jdXJyZW50VmlldyA9PT0gdGhpcy5zdGF0ZS52aWV3cy52aWV3UmVjaXBlKSB7XHJcbiAgICAgICAgY29udGVudCA9IDxSZWNpcGVWaWV3IHJlY2lwZT17dGhpcy5zdGF0ZS5zZWxlY3RlZFJlY2lwZX0gb25DbGljaz17dGhpcy5lZGl0UmVjaXBlfSAvPjtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIGlmICh0aGlzLnN0YXRlLmN1cnJlbnRWaWV3ID09PSB0aGlzLnN0YXRlLnZpZXdzLmVkaXRSZWNpcGUpIHtcclxuICAgICAgICBjb250ZW50ID0gPFJlY2lwZUZvcm0gcmVjaXBlPXt0aGlzLnN0YXRlLnNlbGVjdGVkUmVjaXBlfVxyXG4gICAgICAgICAgbmV3SW5ncmVkaWVudE5hbWU9e3RoaXMuc3RhdGUubmV3SW5ncmVkaWVudE5hbWV9XHJcbiAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVJbnB1dENoYW5nZWR9XHJcbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmFkZEluZ3JlZGllbnR9XHJcbiAgICAgICAgICBvbkRlbGV0ZT17dGhpcy5pbmdyZWRpZW50T25EZWxldGV9XHJcbiAgICAgICAgICBvblN1Ym1pdD17dGhpcy5vblN1Ym1pdH0gLz47XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFZpZXcgPT09IHRoaXMuc3RhdGUudmlld3Muc2hvcHBpbmdMaXN0KSB7XHJcbiAgICAgICAgcmVjaXBlcyA9IHRoaXMuc3RhdGUucmVjaXBlcy5tYXAoKHJlY2lwZSwgaW5kZXgpID0+XHJcbiAgICAgICAgICA8UmVjaXBlSXRlbSBvbkNsaWNrPXt0aGlzLnJlY2lwZUNsaWNrZWR9IHJlY2lwZT17cmVjaXBlfSBrZXk9e2luZGV4fSAvPixcclxuICAgICAgICApO1xyXG4gICAgICAgIHdyYXBwZXIgPVxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAge25hdn1cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYWluLWZsZXgtd3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2hvcHBpbmctd3JhcHBlclwiPlxyXG4gICAgICAgICAgICAgICAgPFNob3BwaW5nTGlzdCBzaG9wcGluZ0xpc3Q9e3RoaXMuc3RhdGUuc2hvcHBpbmdMaXN0LnNob3BwaW5nTGlzdEluZ3JlZGllbnRzfVxyXG4gICAgICAgICAgICAgICAgICBzaG9wcGluZ0xpc3RFeHRyYXM9e3RoaXMuc3RhdGUuc2hvcHBpbmdMaXN0LnNob3BwaW5nTGlzdEV4dHJhc31cclxuICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5hZGRTaG9wcGluZ0xpc3RFeHRyYXN9XHJcbiAgICAgICAgICAgICAgICAgIGRlbGV0ZVNob3BwaW5nTGlzdEluZ3JlZGllbnQ9e3RoaXMuZGVsZXRlU2hvcHBpbmdMaXN0SW5ncmVkaWVudH1cclxuICAgICAgICAgICAgICAgICAgZGVsZXRlU2hvcHBpbmdMaXN0RXh0cmE9e3RoaXMuZGVsZXRlU2hvcHBpbmdMaXN0RXh0cmF9XHJcbiAgICAgICAgICAgICAgICAgIGNyb3NzT3V0U2hvcHBpbmdMaXN0SW5ncmVkaWVudD17dGhpcy5jcm9zc091dFNob3BwaW5nTGlzdEluZ3JlZGllbnR9XHJcbiAgICAgICAgICAgICAgICAgIGNyb3NzT3V0U2hvcHBpbmdMaXN0RXh0cmE9e3RoaXMuY3Jvc3NPdXRTaG9wcGluZ0xpc3RFeHRyYX1cclxuICAgICAgICAgICAgICAgICAgY3JlYXRlTmV3U2hvcHBpbmdMaXN0PXt0aGlzLm5ld1Nob3BwaW5nTGlzdH1cclxuICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWNpcGUtYm9vay13cmFwcGVyXCI+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGlkPXt0aGlzLnN0YXRlLmN1cnJlbnRWaWV3ID09PSB0aGlzLnN0YXRlLnZpZXdzLmdyaWRMYXlvdXQgPyAncmVjaXBlLWJvb2stZ3JpZCcgOiAncmVjaXBlLWJvb2stbGlzdCd9PlxyXG4gICAgICAgICAgICAgICAgICB7cmVjaXBlc31cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdyYXBwZXIgPVxyXG4gICAgICAgICAgPGRpdj5cclxuICAgICAgICAgICAge25hdn1cclxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYWluLXdyYXBwZXJcIj4ge2NvbnRlbnR9PC9kaXY+XHJcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPVwicmVjaXBlLWJ1dHRvbiBsb2ctb3V0LWJ1dHRvblwiIG9uQ2xpY2s9e3RoaXMubG9nT3V0Q2xpY2tlZH0+TG9nIE91dDwvYnV0dG9uPlxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHdyYXBwZXIgPVxyXG4gICAgICAgIDxkaXY+XHJcbiAgICAgICAgICA8TG9naW4gLz5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIH1cclxuICAgIHJldHVybiAoXHJcbiAgICAgIHdyYXBwZXJcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG57LyogPGRpdiBjbGFzcz1cIm1heC02MDBcIj5tYXgtd2lkdGg6IDYwMHB4PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWluLTYwMFwiPm1pbi13aWR0aDogNjAwcHg8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtaW4tNzY4XCI+bWluLXdpZHRoOiA3NjhweDwvZGl2PlxyXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIm1pbi05OTJcIj5taW4td2lkdGg6IDk5MnB4PC9kaXY+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwibWluLTEyMDBcIj5taW4td2lkdGg6IDEyMDBweDwvZGl2PlxyXG4gICAgICAgPC9kaXY+ICovfVxyXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG5SZWFjdERPTS5yZW5kZXIoPFJlY2lwZVBhZ2UgLz4sXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKVxyXG4pOyJdLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///61\\n\")}});","extractedComments":[]}